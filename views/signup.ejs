<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESSU Research and Information Management System - Sign Up</title>
    <!-- Bootstrap CSS for responsiveness -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
    position: relative;
    background-color: #e8f5e9; /* No background on the main body */
    display: flex;
    flex-direction: column;
    font-family: 'Arial', sans-serif;
}

body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        url('/images/essu_logo.png') no-repeat center center fixed,  /* Logo image */
        url('data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%2220%22 height=%2220%22 viewBox=%220 0 20 20%22%3E%3Cpath fill=%22%23e0e0e0%22 d=%22M0 0h2v2H0zm2 2h2v2H2zm2 2h2v2H4zm2 2h2v2H6zm2 2h2v2H8zm2 2h2v2H10zm2 2h2v2H12zm2 2h2v2H14z%22/%3E%3C/svg%3E') repeat;
    background-size: 450px, 30px 30px; /* Larger checkered pattern for a more refined look */
    background-position: center, 0 0; /* Logo stays centered, checkered pattern starts at the top */
    opacity: 0.9; /* Slightly faded to make it softer */
    z-index: -1; /* Place it behind other content */
    animation: fadeAnimation 15s ease-in-out infinite, moveCheckered 10s linear infinite; /* Fading + vertical move */
}

/* Keyframes for fading effect */
@keyframes fadeAnimation {
    0%, 100% { opacity: 0.9; } /* Keep the opacity at a subtle level */
    50% { opacity: 0.4; }   /* Faded in the middle for a smooth transition */
}

/* Keyframes for moving only the checkered pattern vertically */
@keyframes moveCheckered {
    0% { background-position: center, 0 0; }  /* Start at the top */
    100% { background-position: center, 0 100%; }  /* Move to the bottom */
}
        .header {
            background: linear-gradient(90deg, #2e7d32, #66bb6a); /* Trendy gradient */
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
        .header .brand {
            font-size: 1.5rem;
            font-weight: 600;
        }
        .header .btn-back-home {
            background-color: #ffffff; /* White background for button */
            color: #2e7d32; /* Dark green text */
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
        }
        .header .btn-back-home:hover {
            background-color: #f1f1f1; /* Light grey on hover */
            color: #2e7d32; /* Dark green text on hover */
        }
        .signup-container {
            background-color: #ffffff; /* White background for the sign-up container */
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
            margin: 5rem auto 2rem; /* Added top margin to avoid header overlap */
        }
        .signup-container h2 {
            margin-bottom: 1.5rem;
            text-align: center;
            font-weight: 600;
            color: #2e7d32; /* Dark green for the title */
        }
        .form-group {
            margin-bottom: 1.2rem;
        }
        .form-control {
            height: 45px;
            font-size: 1rem;
            border-color: #66bb6a; /* Medium green border */
        }
        .form-control:focus {
            border-color: #388e3c; /* Darker green when focused */
            box-shadow: 0 0 0 0.25rem rgba(56, 142, 60, 0.25); /* Green shadow on focus */
        }
        .btn-signup {
            background-color: #388e3c; /* Dark green button */
            color: white;
            font-size: 1rem;
            font-weight: bold;
        }
        .btn-signup:hover {
            background-color: #2e7d32; /* Darker green on hover */
        }
        .login-link {
            text-align: center;
            margin-top: 1rem;
        }
        .login-link a {
            color: #388e3c;
            text-decoration: none;
            font-weight: bold;
        }
        .login-link a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>

<div class="header">
    <div class="brand">ESSU Research and Information Management System</div>
    <button class="btn-back-home" onclick="window.location.href='/'">Go back to homepage</button>
</div>

<div class="signup-container" style="background: linear-gradient(90deg, #ffffff, #d4edda);">
    <h2>Sign Up</h2>
    <form action="/signup" method="POST" enctype="multipart/form-data">
        <div class="form-group">
            <label for="role">Sign up as</label>
            <select class="form-select" id="role" name="role" required>
                <option value="Faculty">Faculty</option>
                <option value="RDSO Staff">RDSO Staff</option>
                <!-- Disable Super Admin option if one already exists -->
                <option value="Super Admin">Super Admin</option>

            </select>
        </div>

        <div style="text-align: center;">
            <label for="profilePic" style="display: block; margin-bottom: 10px; font-size: 16px; font-weight: bold;">Profile Picture</label>
            <input type="file" id="profilePic" name="profilePic" accept="image/*" style="display: none;">
            <div id="imagePreview" 
                 style="width: 150px; height: 150px; border-radius: 50%; overflow: hidden; border: 2px solid #ccc; display: inline-block; background-color: #f0f0f0; cursor: pointer; position: relative;">
                <img id="previewImg" src="https://cdn-icons-png.flaticon.com/512/847/847969.png" alt="Default Profile Icon" 
                     style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0;">
            </div>
        </div>
    
        <!-- Full Name Field -->
        <div class="form-group">
            <label for="fullname">Full Name</label>
            <input type="text" class="form-control" id="fullname" name="fullname" placeholder="Enter full name" required>
        </div>
    
        <div class="form-group">
            <label for="username">Username</label>
            <input type="text" class="form-control" id="username" name="username" placeholder="Enter username" required>
            <div id="usernameFeedback" class="text-danger" style="display: none;">
                Username must be in lowercase and cannot contain spaces.
            </div>
        </div>
    
        <% if (typeof errorMessage !== 'undefined') { %>
            <div class="form-group text-center text-danger">
                <p><%= errorMessage %></p>
            </div>
        <% } %>
    
        
    
        
        
        
        
    
        <div class="form-group">
            <label for="birthday">Birthday</label>
            <input type="date" class="form-control" id="birthday" name="birthday" required>
        </div>
    
        <div class="form-group">
            <label for="email">Email</label>
            <input type="email" class="form-control" id="email" name="email" placeholder="Enter your email" required>
        </div>
    
        <div class="form-group">
            <label for="contact">Contact Number</label>
            <div class="input-group">
                <!-- Country Code Dropdown -->
                <select id="countryCode" class="form-select" required>
                    <option value="+1">+1 (USA/Canada)</option>
                    <option value="+93">+93 (Afghanistan)</option>
                    <option value="+355">+355 (Albania)</option>
                    <option value="+213">+213 (Algeria)</option>
                    <option value="+376">+376 (Andorra)</option>
                    <option value="+244">+244 (Angola)</option>
                    <option value="+1264">+1264 (Anguilla)</option>
                    <option value="+1268">+1268 (Antigua and Barbuda)</option>
                    <option value="+54">+54 (Argentina)</option>
                    <option value="+374">+374 (Armenia)</option>
                    <option value="+297">+297 (Aruba)</option>
                    <option value="+61">+61 (Australia)</option>
                    <option value="+43">+43 (Austria)</option>
                    <option value="+994">+994 (Azerbaijan)</option>
                    <option value="+1242">+1242 (Bahamas)</option>
                    <option value="+973">+973 (Bahrain)</option>
                    <option value="+880">+880 (Bangladesh)</option>
                    <option value="+1246">+1246 (Barbados)</option>
                    <option value="+375">+375 (Belarus)</option>
                    <option value="+32">+32 (Belgium)</option>
                    <option value="+501">+501 (Belize)</option>
                    <option value="+229">+229 (Benin)</option>
                    <option value="+975">+975 (Bhutan)</option>
                    <option value="+591">+591 (Bolivia)</option>
                    <option value="+387">+387 (Bosnia and Herzegovina)</option>
                    <option value="+267">+267 (Botswana)</option>
                    <option value="+55">+55 (Brazil)</option>
                    <option value="+246">+246 (British Indian Ocean Territory)</option>
                    <option value="+673">+673 (Brunei Darussalam)</option>
                    <option value="+359">+359 (Bulgaria)</option>
                    <option value="+226">+226 (Burkina Faso)</option>
                    <option value="+257">+257 (Burundi)</option>
                    <option value="+855">+855 (Cambodia)</option>
                    <option value="+237">+237 (Cameroon)</option>
                    <option value="+1-345">+1-345 (Cayman Islands)</option>
                    <option value="+236">+236 (Central African Republic)</option>
                    <option value="+56">+56 (Chile)</option>
                    <option value="+86">+86 (China)</option>
                    <option value="+61">+61 (Christmas Island)</option>
                    <option value="+57">+57 (Colombia)</option>
                    <option value="+269">+269 (Comoros)</option>
                    <option value="+242">+242 (Congo)</option>
                    <option value="+243">+243 (Congo, Democratic Republic of the)</option>
                    <option value="+682">+682 (Cook Islands)</option>
                    <option value="+506">+506 (Costa Rica)</option>
                    <option value="+385">+385 (Croatia)</option>
                    <option value="+53">+53 (Cuba)</option>
                    <option value="+357">+357 (Cyprus)</option>
                    <option value="+420">+420 (Czech Republic)</option>
                    <option value="+45">+45 (Denmark)</option>
                    <option value="+253">+253 (Djibouti)</option>
                    <option value="+1767">+1767 (Dominica)</option>
                    <option value="+1809">+1809 (Dominican Republic)</option>
                    <option value="+593">+593 (Ecuador)</option>
                    <option value="+20">+20 (Egypt)</option>
                    <option value="+503">+503 (El Salvador)</option>
                    <option value="+240">+240 (Equatorial Guinea)</option>
                    <option value="+291">+291 (Eritrea)</option>
                    <option value="+372">+372 (Estonia)</option>
                    <option value="+251">+251 (Ethiopia)</option>
                    <option value="+500">+500 (Falkland Islands)</option>
                    <option value="+298">+298 (Faroe Islands)</option>
                    <option value="+679">+679 (Fiji)</option>
                    <option value="+358">+358 (Finland)</option>
                    <option value="+33">+33 (France)</option>
                    <option value="+241">+241 (Gabon)</option>
                    <option value="+220">+220 (Gambia)</option>
                    <option value="+995">+995 (Georgia)</option>
                    <option value="+49">+49 (Germany)</option>
                    <option value="+233">+233 (Ghana)</option>
                    <option value="+350">+350 (Gibraltar)</option>
                    <option value="+30">+30 (Greece)</option>
                    <option value="+299">+299 (Greenland)</option>
                    <option value="+1473">+1473 (Grenada)</option>
                    <option value="+502">+502 (Guatemala)</option>
                    <option value="+224">+224 (Guinea)</option>
                    <option value="+245">+245 (Guinea-Bissau)</option>
                    <option value="+592">+592 (Guyana)</option>
                    <option value="+509">+509 (Haiti)</option>
                    <option value="+504">+504 (Honduras)</option>
                    <option value="+852">+852 (Hong Kong)</option>
                    <option value="+36">+36 (Hungary)</option>
                    <option value="+354">+354 (Iceland)</option>
                    <option value="+91">+91 (India)</option>
                    <option value="+62">+62 (Indonesia)</option>
                    <option value="+98">+98 (Iran)</option>
                    <option value="+964">+964 (Iraq)</option>
                    <option value="+353">+353 (Ireland)</option>
                    <option value="+972">+972 (Israel)</option>
                    <option value="+39">+39 (Italy)</option>
                    <option value="+1-876">+1-876 (Jamaica)</option>
                    <option value="+81">+81 (Japan)</option>
                    <option value="+962">+962 (Jordan)</option>
                    <option value="+7">+7 (Kazakhstan/Kyrgyzstan)</option>
                    <option value="+254">+254 (Kenya)</option>
                    <option value="+686">+686 (Kiribati)</option>
                    <option value="+850">+850 (Korea, North)</option>
                    <option value="+82">+82 (Korea, South)</option>
                    <option value="+965">+965 (Kuwait)</option>
                    <option value="+996">+996 (Kyrgyzstan)</option>
                    <option value="+856">+856 (Laos)</option>
                    <option value="+371">+371 (Latvia)</option>
                    <option value="+961">+961 (Lebanon)</option>
                    <option value="+266">+266 (Lesotho)</option>
                    <option value="+231">+231 (Liberia)</option>
                    <option value="+218">+218 (Libya)</option>
                    <option value="+423">+423 (Liechtenstein)</option>
                    <option value="+370">+370 (Lithuania)</option>
                    <option value="+352">+352 (Luxembourg)</option>
                    <option value="+853">+853 (Macau)</option>
                    <option value="+389">+389 (Macedonia)</option>
                    <option value="+261">+261 (Madagascar)</option>
                    <option value="+265">+265 (Malawi)</option>
                    <option value="+60">+60 (Malaysia)</option>
                    <option value="+960">+960 (Maldives)</option>
                    <option value="+223">+223 (Mali)</option>
                    <option value="+356">+356 (Malta)</option>
                    <option value="+692">+692 (Marshall Islands)</option>
                    <option value="+596">+596 (Martinique)</option>
                    <option value="+222">+222 (Mauritania)</option>
                    <option value="+230">+230 (Mauritius)</option>
                    <option value="+262">+262 (Mayotte)</option>
                    <option value="+52">+52 (Mexico)</option>
                    <option value="+691">+691 (Micronesia)</option>
                    <option value="+373">+373 (Moldova)</option>
                    <option value="+377">+377 (Monaco)</option>
                    <option value="+976">+976 (Mongolia)</option>
                    <option value="+382">+382 (Montenegro)</option>
                    <option value="+1664">+1664 (Montserrat)</option>
                    <option value="+212">+212 (Morocco)</option>
                    <option value="+258">+258 (Mozambique)</option>
                    <option value="+95">+95 (Myanmar)</option>
                    <option value="+264">+264 (Namibia)</option>
                    <option value="+674">+674 (Nauru)</option>
                    <option value="+977">+977 (Nepal)</option>
                    <option value="+31">+31 (Netherlands)</option>
                    <option value="+599">+599 (Netherlands Antilles)</option>
                    <option value="+687">+687 (New Caledonia)</option>
                    <option value="+64">+64 (New Zealand)</option>
                    <option value="+505">+505 (Nicaragua)</option>
                    <option value="+227">+227 (Niger)</option>
                    <option value="+234">+234 (Nigeria)</option>
                    <option value="+683">+683 (Niue)</option>
                    <option value="+672">+672 (Norfolk Island)</option>
                    <option value="+1-670">+1-670 (Northern Mariana Islands)</option>
                    <option value="+47">+47 (Norway)</option>
                    <option value="+968">+968 (Oman)</option>
                    <option value="+92">+92 (Pakistan)</option>
                    <option value="+680">+680 (Palau)</option>
                    <option value="+970">+970 (Palestine)</option>
                    <option value="+507">+507 (Panama)</option>
                    <option value="+675">+675 (Papua New Guinea)</option>
                    <option value="+595">+595 (Paraguay)</option>
                    <option value="+51">+51 (Peru)</option>
                    <option value="+63" selected>+63 (Philippines)</option>
                </select>
                <!-- Contact Number Input -->
                <input type="text" class="form-control" id="contactNumber" placeholder="Enter your number" required 
                       pattern="\d+" title="Please enter a valid number" />
            </div>
        </div>
        
        <script>
            const countryCode = document.getElementById('countryCode');
            const contactNumber = document.getElementById('contactNumber');
        
            // Function to update the pattern based on country code
            countryCode.addEventListener('change', function() {
                const selectedCode = countryCode.value;
                let pattern = "";
        
                switch (selectedCode) {
                    case "+63":
                        // Philippines: 9 digits after +63
                        pattern = "^09\d{9}$"; 
                        break;
                    case "+1":
                        // USA/Canada: 10 digits after +1
                        pattern = "^\d{10}$";
                        break;
                    case "+44":
                        // UK: 10 digits after +44
                        pattern = "^\d{10}$";
                        break;
                    // Add more cases as needed
                    default:
                        pattern = "\d+";  // General fallback
                }
        
                // Update the pattern attribute dynamically
                contactNumber.setAttribute("pattern", pattern);
                contactNumber.setAttribute("title", "Please enter a valid " + selectedCode + " number");
            });
        </script>
        
        

        <div class="form-group">
            <label for="password">Password</label>
            <div class="password-container">
                <input type="password" class="form-control" id="password" name="password" placeholder="Enter password" required>
                <span class="toggle-password" id="togglePassword" onclick="togglePasswordVisibility()">👁️</span>
            </div>
    
            <div id="passwordRequirementsList">
                <h>Password must have:</h>
                <ul style="list-style-type: none;">
                    <li id="lengthRequirement"><span id="lengthTick">❌ </span>8+ characters </li>
                    <li id="uppercaseRequirement"><span id="uppercaseTick">❌ </span>At least one uppercase letter </li>
                    <li id="numberRequirement"><span id="numberTick">❌ </span>At least one number </li>
                    <li id="specialCharRequirement"><span id="specialCharTick">❌ </span>At least one special character </li>
                </ul>
            </div>
        </div>
    
        <div class="form-group">
            <label for="confirmPassword">Confirm Password</label>
            <div class="password-container">
                <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" placeholder="Confirm your password" required>
                <span class="toggle-password" id="toggleConfirmPassword" onclick="toggleConfirmPasswordVisibility()">👁️</span>
            </div>
            <div id="confirmPasswordError" class="text-danger" style="display: none;">
                Passwords do not match.
            </div>
        </div>
    
        <div class="form-group text-center">
            <button type="submit" class="btn btn-signup w-100" id="submitButton">Sign Up</button>
        </div>
    </form>
    
    
    
    
    <script>
        // Enforce lowercase and no spaces for username
        function validateUsername() {

            var fullnameField = document.getElementById('fullname');
    var fullname = fullnameField.value.trim();

    // Check if the Full Name field is empty
    if (fullname === "") {
        alert("Full Name is required.");
        return false; // Prevent form submission
    }
            var usernameField = document.getElementById('username');
            var username = usernameField.value;
    
            // Convert to lowercase
            username = username.toLowerCase();
    
            // Remove spaces
            username = username.replace(/\s+/g, '');
    
            // Update the field value
            usernameField.value = username;
    
            // Prevent form submission if there are spaces
            if (/\s/.test(username)) {
                alert("Username cannot contain spaces.");
                return false; // Prevent form submission
            }
    
            return true; // Allow form submission

            
        }

       



    
        // Real-time username checker
        document.getElementById('username').addEventListener('input', function() {
            var username = this.value;
    
            // Convert to lowercase
            username = username.toLowerCase();
    
            // Remove spaces
            var formattedUsername = username.replace(/\s+/g, '');
    
            // Update the input field value
            this.value = formattedUsername;
    
            // Show or hide the feedback message
            var feedback = document.getElementById('usernameFeedback');
            if (/\s/.test(formattedUsername) || formattedUsername !== username) {
                feedback.style.display = 'block'; // Show feedback if there are spaces or it's not lowercase
            } else {
                feedback.style.display = 'none'; // Hide feedback if username is valid
            }
        });
    </script>

<script>
    const profilePicInput = document.getElementById('profilePic');
    const imagePreview = document.getElementById('imagePreview');
    const previewImg = document.getElementById('previewImg');

    imagePreview.addEventListener('click', () => {
        profilePicInput.click();
    });

    profilePicInput.addEventListener('change', (event) => {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                previewImg.src = e.target.result;
                previewImg.style.display = 'block';
            };
            reader.readAsDataURL(file);
        }
    });
</script>



    
    
    
    <script>
        // Toggle password visibility for the password field
        function togglePasswordVisibility() {
            const passwordField = document.getElementById('password');
            const toggleIcon = document.getElementById('togglePassword');
            if (passwordField.type === 'password') {
                passwordField.type = 'text';
                toggleIcon.textContent = '🙈';  // Change icon to "hide"
            } else {
                passwordField.type = 'password';
                toggleIcon.textContent = '👁️';  // Change icon to "show"
            }
        }
    
        // Toggle password visibility for the confirm password field
        function toggleConfirmPasswordVisibility() {
            const confirmPasswordField = document.getElementById('confirmPassword');
            const toggleIcon = document.getElementById('toggleConfirmPassword');
            if (confirmPasswordField.type === 'password') {
                confirmPasswordField.type = 'text';
                toggleIcon.textContent = '🙈';  // Change icon to "hide"
            } else {
                confirmPasswordField.type = 'password';
                toggleIcon.textContent = '👁️';  // Change icon to "show"
            }
        }
    
        // Password validation
        const passwordRequirements = /^(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
        const lengthTick = document.getElementById('lengthTick');
        const uppercaseTick = document.getElementById('uppercaseTick');
        const numberTick = document.getElementById('numberTick');
        const specialCharTick = document.getElementById('specialCharTick');
        const confirmPasswordTick = document.getElementById('confirmPasswordTick');
        const confirmPasswordError = document.getElementById('confirmPasswordError');
    
        // Check each password requirement
        document.getElementById('password').addEventListener('input', function() {
            const password = this.value;
    
            // Check length requirement
            if (password.length >= 8) {
                lengthTick.textContent = '✔️';
            } else {
                lengthTick.textContent = '❌';
            }
    
            // Check uppercase letter
            if (/[A-Z]/.test(password)) {
                uppercaseTick.textContent = '✔️';
            } else {
                uppercaseTick.textContent = '❌';
            }
    
            // Check number
            if (/\d/.test(password)) {
                numberTick.textContent = '✔️';
            } else {
                numberTick.textContent = '❌';
            }
    
            // Check special character
            if (/[@$!%*?&]/.test(password)) {
                specialCharTick.textContent = '✔️';
            } else {
                specialCharTick.textContent = '❌';
            }
        });
    
        // Confirm password check
        document.getElementById('confirmPassword').addEventListener('input', function() {
            const password = document.getElementById('password').value;
            const confirmPassword = this.value;
    
            // Check if confirm password matches the password
            if (password === confirmPassword) {
                confirmPasswordTick.textContent = '✔️';
                confirmPasswordError.style.display = 'none';
            } else {
                confirmPasswordTick.textContent = '❌';
                confirmPasswordError.style.display = 'block';
            }
        });
    
        // Prevent form submission if validation fails
        document.querySelector('form').addEventListener('submit', function(event) {
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
    
            const isPasswordValid = passwordRequirements.test(password);
            const isConfirmPasswordValid = password === confirmPassword;
    
            if (!isPasswordValid || !isConfirmPasswordValid) {
                event.preventDefault();  // Prevent form submission
            }
        });
    </script>
    
    <style>
        /* Styling for password input containers */
        .password-container {
            position: relative;
        }
    
        .toggle-password {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
        }
    
        /* Optional: Style the tick icons */
        #lengthTick, #uppercaseTick, #numberTick, #specialCharTick, #confirmPasswordTick {
            color: green;
        }
    
        #lengthTick, #uppercaseTick, #numberTick, #specialCharTick {
            color: red;
        }
    </style>
    
    
    
    
    

    <div class="login-link">
        <p>Already have an account? <a href="/login">Login</a></p>
    </div>
</div>





<!-- Bootstrap JS for responsiveness -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
